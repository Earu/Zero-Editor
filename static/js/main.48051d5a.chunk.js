(this["webpackJsonpzero-editor"]=this["webpackJsonpzero-editor"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA8BAMAAAAnEK9/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURVFRUTMzM3nhs84AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhSURBVEjHY6AYCOIBAqPyo/Kj8qPyo/Kj8sNUnhLAwAAAui1roY+vV8MAAAAASUVORK5CYII="},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),i=n.n(o),s=n(7),u=n(6),l=n(1),c=n(2),p=n(5),h=n(4),d=n(3),m=(n(17),n(18),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"onShowHide",value:function(e){var t,n=e.currentTarget,r="header"===n.className?n.parentElement:null===(t=n.parentElement)||void 0===t?void 0:t.parentElement;if(r){var a=r.getElementsByClassName("content")[0],o=r.getElementsByClassName("header")[0];if(o&&a){var i=o.getElementsByTagName("button")[0];if(i)"none"===a.style.display?(a.style.display="block",i.textContent="-"):(a.style.display="none",i.textContent="+")}}}},{key:"render",value:function(){return a.a.createElement("div",{className:"node-menu-category"},a.a.createElement("div",{className:"header",onClick:this.onShowHide},a.a.createElement("span",null,this.props.title),a.a.createElement("button",{disabled:!0},"-")),a.a.createElement("div",{className:"content"},this.props.children))}}]),n}(a.a.Component)),v=n(9),f=(n(19),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"createDragItem",value:function(){var e=v.Guid.toString(),t=document.createElement("div");return t.id=e,t.style.position="absolute",t.style.zIndex="9995",t.style.width="100px",t.style.height="25px",i.a.render(a.a.createElement(n,{name:this.props.name,editor:this.props.editor}),t),t}},{key:"onItemDropped",value:function(e,t){var n=this.props.editor.factory.createNode(this.props.name);if(null!==n){var r=this.props.editor.graph;if(null!=r){var a=r.pageToGraphCoordinates(e,t),o=a.x,i=a.y;n.setCoordinates(o,i),r.addNode(n)}}}},{key:"onMouseDown",value:function(e){var t=this,n=this.createDragItem();document.body.append(n);var r=function(e,t){n.style.left="".concat(e-50,"px"),n.style.top="".concat(t-12.5,"px")};r(e.pageX,e.pageY);var a=function(e){r(e.pageX,e.pageY)};document.addEventListener("mousemove",a),document.addEventListener("keyup",(function e(t){t.shiftKey&&"Shift"!==t.key&&16!==t.which||(document.removeEventListener("keyup",e),n.onmouseup=null,n.remove())})),n.onmouseup=function(e){e.shiftKey||(document.removeEventListener("mousemove",a),n.onmouseup=null,n.remove()),t.onItemDropped(e.pageX,e.pageY)};document.addEventListener("mouseout",(function e(t){var r=t.pageX,a=t.pageY;a>=0&&a<=window.innerHeight&&r>=0&&r<=window.innerWidth||(n.onmouseup=null,n.remove(),document.removeEventListener("mouseout",e))}))}},{key:"render",value:function(){var e=this.props.editor.factory.getNodeColor(this.props.name);return a.a.createElement("div",{className:"node-menu-item",style:{backgroundImage:"linear-gradient(to right, ".concat(e,", #111)")}},a.a.createElement("div",{onMouseDown:this.onMouseDown.bind(this)},this.props.name))}}]),n}(a.a.Component)),y=(n(20),new Map);y.set("Data",["Number","Toggle","Vector","Angle","Color"]),y.set("Entity",["Model"]),y.set("Model",[]),y.set("Effects",[]),y.set("Model",[]),y.set("Modifiers",[]);var g=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).state={searchResults:y,isSearching:!1},r}return Object(c.a)(n,[{key:"onSearch",value:function(e){var t=e.currentTarget.value;if(t&&""!==t.trim()){t=t.trim().toLowerCase();var n,r=new Map,a=Object(u.a)(y);try{for(a.s();!(n=a.n()).done;){var o=Object(s.a)(n.value,2),i=o[0],l=o[1];r.set(i,l.filter((function(e){return e.toLowerCase().includes(t)})))}}catch(c){a.e(c)}finally{a.f()}this.setState({searchResults:r,isSearching:!0})}else this.setState({searchResults:y,isSearching:!1})}},{key:"renderItems",value:function(){var e,t=this,n=[],r=Object(u.a)(this.state.searchResults);try{var o=function(){var r=Object(s.a)(e.value,2),o=r[0],i=r[1],u=o;t.state.isSearching&&(u+=" (".concat(i.length,")")),n.push(a.a.createElement(m,{key:"node_menu_category_".concat(o),title:u},i.map((function(e){return a.a.createElement(f,{key:"node_menu_item_".concat(o,"_").concat(e),name:e,editor:t.props.editor})}))))};for(r.s();!(e=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}return n}},{key:"render",value:function(){return a.a.createElement("div",{id:"node-selector-menu"},a.a.createElement("input",{type:"text",placeholder:"search nodes...",onInput:this.onSearch.bind(this)}),a.a.createElement("hr",null),this.renderItems())}}]),n}(a.a.Component),b=(n(21),n(22),n(23),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"onResetTransform",value:function(){this.props.graph.setTransform(0,0,1)}},{key:"onChangeX",value:function(e){var t=parseInt(e.target.value);isNaN(t)||this.props.graph.setTransform(t,null,null)}},{key:"onChangeY",value:function(e){var t=parseInt(e.target.value);isNaN(t)||this.props.graph.setTransform(null,t,null)}},{key:"onChangeZ",value:function(e){var t=parseFloat(e.target.value);isNaN(t)||this.props.graph.setTransform(null,null,t)}},{key:"setInputFilter",value:function(e,t){var n=function(n){if(!t(e.value))return n.preventDefault(),!1};["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){return e.addEventListener(t,n)}))}},{key:"componentDidMount",value:function(){var e=/^-?[0-9]*\.?[0-9]*$/,t=document.getElementById("graph-control-x"),n=document.getElementById("graph-control-y"),r=document.getElementById("graph-control-z");t&&n&&r&&(this.setInputFilter(t,(function(t){return e.test(t)})),this.setInputFilter(n,(function(t){return e.test(t)})),this.setInputFilter(r,(function(t){return e.test(t)})))}},{key:"render",value:function(){return a.a.createElement("div",{id:"graph-controls"},a.a.createElement("button",{onMouseDown:this.onResetTransform.bind(this)},"\u27f2"),a.a.createElement("label",{htmlFor:"graph-control-x"},"X"),a.a.createElement("input",{id:"graph-control-x",type:"text",placeholder:"X",defaultValue:"0",onChange:this.onChangeX.bind(this)}),a.a.createElement("label",{htmlFor:"graph-control-y"},"Y"),a.a.createElement("input",{id:"graph-control-y",type:"text",placeholder:"Y",defaultValue:"0",onChange:this.onChangeY.bind(this)}),a.a.createElement("label",{htmlFor:"graph-control-z"},"Z"),a.a.createElement("input",{id:"graph-control-z",type:"text",placeholder:"Z",defaultValue:"10.00",onChange:this.onChangeZ.bind(this)}))}}]),n}(a.a.Component)),_=(n(24),n(25),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-output"},a.a.createElement("span",null,this.props.name),a.a.createElement("div",{className:"user-selection"}))}}]),n}(a.a.Component)),k=(n(26),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"update",value:function(){this.props.node.updateOutputs()}}]),n}(a.a.Component)),O=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-property"},a.a.createElement("div",{className:"user-selection"}),a.a.createElement("label",{htmlFor:this.props.id},this.props.name),a.a.createElement("input",{className:"graph-node-property-text-input",id:this.props.id,type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue(),onChange:this.update.bind(this)}))}}]),n}(k),E=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-property"},a.a.createElement("div",{className:"user-selection"}),a.a.createElement("input",{id:this.props.id,type:"checkbox",placeholder:this.props.name,defaultChecked:this.props.property.getValue(),onChange:this.update.bind(this)}),a.a.createElement("label",{className:"graph-node-property-checkbox-label",htmlFor:this.props.id},this.props.name))}}]),n}(k),j=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-property"},a.a.createElement("div",{className:"user-selection"}),a.a.createElement("div",null,this.props.name),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_x")},"X"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_x"),type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue().x,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_y")},"Y"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_y"),type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue().y,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_z")},"Z"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_z"),type:"number",placeholder:this.props.name,defaultValue:this.props.property.getValue().z,onChange:this.update.bind(this)}))}}]),n}(k),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-property"},a.a.createElement("div",{className:"user-selection"}),a.a.createElement("div",null,this.props.name),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_roll")},"Roll"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_roll"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().roll,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_pitch")},"Pitch"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_pitch"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().pitch,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_yaw")},"Yaw"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_yaw"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().yaw,onChange:this.update.bind(this)}))}}]),n}(k),x=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node-property"},a.a.createElement("div",{className:"user-selection"}),a.a.createElement("div",null,this.props.name),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_red")},"Red"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_red"),type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().red,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_green")},"Green"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_green"),type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().green,onChange:this.update.bind(this)}),a.a.createElement("label",{htmlFor:"".concat(this.props.id,"_blue")},"Blue"),a.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_blue"),type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().blue,onChange:this.update.bind(this)}))}}]),n}(k),N=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).offsetX=0,e.offsetY=0,e.offsetZoom=0,e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e){var t=this.props.node.x,n=this.props.node.y,r=this.props.graph.graphToPageCoordinates(t,n),a=this.props.graph.currentZoom;this.offsetX=e.pageX-r.x,this.offsetY=e.pageY-r.y,this.offsetZoom=a,this.props.graph.selectedGraphNode=this,this.props.graph.isMoveable=!1}},{key:"onMouseUp",value:function(){this.props.graph.selectedGraphNode===this&&(this.props.graph.selectedGraphNode=null,this.props.graph.isMoveable=!0)}},{key:"onMouseMove",value:function(e){this.props.graph.selectedGraphNode===this&&this.updatePosition(e)}},{key:"onClose",value:function(){this.props.graph.removeNode(this.props.node.id)}},{key:"updatePosition",value:function(e){var t=1+(this.props.graph.currentZoom-this.offsetZoom)/this.offsetZoom,n=this.props.graph.pageToGraphCoordinates(e.pageX-this.offsetX*t,e.pageY-this.offsetY*t);this.props.node.setCoordinates(n.x,n.y),this.props.graph.updateNodes()}},{key:"componentDidMount",value:function(){var e=document.getElementById("graph");e&&e.addEventListener("mousemove",this.onMouseMove.bind(this))}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("graph");e&&e.removeEventListener("mousemove",this.onMouseMove)}},{key:"renderProperties",value:function(){var e,t=[],n=Object(u.a)(this.props.node.properties);try{for(n.s();!(e=n.n()).done;){var r=Object(s.a)(e.value,2),o=r[0],i=r[1],l="".concat(this.props.node.id,"_").concat(o);switch(i.typeName){case"Toggle":t.push(a.a.createElement(E,{id:l,key:l,node:this.props.node,name:o,property:i}));break;case"Number":t.push(a.a.createElement(O,{id:l,key:l,node:this.props.node,name:o,property:i}));break;case"Vector":t.push(a.a.createElement(j,{id:l,key:l,node:this.props.node,name:o,property:i}));break;case"Angle":t.push(a.a.createElement(w,{id:l,key:l,node:this.props.node,name:o,property:i}));break;case"Color":t.push(a.a.createElement(x,{id:l,key:l,node:this.props.node,name:o,property:i}))}}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"renderOutputs",value:function(){var e,t=[],n=Object(u.a)(this.props.node.outputs);try{for(n.s();!(e=n.n()).done;){var r=Object(s.a)(e.value,2),o=r[0],i=r[1],l="".concat(this.props.node.id,"_").concat(o);t.push(a.a.createElement(_,{key:l,name:o,output:i}))}}catch(c){n.e(c)}finally{n.f()}return t}},{key:"render",value:function(){return a.a.createElement("div",{className:"graph-node",style:{position:"absolute",left:this.props.node.x,top:this.props.node.y,width:this.props.node.width}},a.a.createElement("div",{style:{backgroundImage:"linear-gradient(to right, ".concat(this.props.node.color,", #111)"),height:21,cursor:"move"},onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),className:"header"},a.a.createElement("div",null,this.props.node.name),a.a.createElement("button",{onClick:this.onClose.bind(this)},"x")),a.a.createElement("div",{className:"content"},this.renderProperties(),a.a.createElement("hr",null),this.renderOutputs()))}}]),n}(a.a.Component),C=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._currentZoom=1,r.mouseDown=!1,r.moveable=!0,r.initialGrabX=0,r.initialGrabY=0,r._xOffset=0,r._yOffset=0,r._nodeTable=void 0,r._selectedGraphNode=null,r.props.editor.graph=Object(p.a)(r),r._nodeTable=new Map,r.state={nodes:[]},r}return Object(c.a)(n,[{key:"pageToGraphCoordinates",value:function(e,t){var n=window.innerWidth,r=window.innerHeight,a=this._currentZoom,o=(this._xOffset-n/2)/a,i=(this._yOffset-r/2)/a,s=this.size/2;return{x:s+o+e/a,y:s+i+t/a}}},{key:"graphToPageCoordinates",value:function(e,t){var n=window.innerWidth,r=window.innerHeight,a=this._currentZoom,o=(this._xOffset-n/2)/a,i=(this._yOffset-r/2)/a,s=this.size/2;return{x:(e-s-o)*a,y:(t-s-i)*a}}},{key:"updateTransform",value:function(){var e=document.getElementById("graph");e&&(e.style.transform="translateX(".concat(-this._xOffset,"px) translateY(").concat(-this._yOffset,"px) scale(").concat(this._currentZoom,")"));var t=document.getElementById("graph-controls");if(t){var n=t.getElementsByTagName("input"),r=n[0],a=n[1],o=n[2];r.value=(this._xOffset/this._currentZoom).toFixed(0),a.value=(this._yOffset/this._currentZoom).toFixed(0),o.value=(10*this._currentZoom).toFixed(2)}}},{key:"setTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.moveable){var r=5e3*this._currentZoom+250;if(null!=e){var a=5e3*this._currentZoom+250;this._xOffset=e>a?a:e<-r?-r:e}if(null!=t){var o=5e3*this._currentZoom+250;this._yOffset=t>o?o:t<-r?-r:t}null!=n&&(this._currentZoom=n>=5?5:n),this.updateTransform()}}},{key:"addNode",value:function(e){this._nodeTable.set(e.id,e),this.state.nodes.push(e),this.updateNodes()}},{key:"removeNode",value:function(e){var t=this.state.nodes.filter((function(t){return t.id!==e}));this._nodeTable.delete(e),this.setState({nodes:t}),this.updateTransform()}},{key:"getNode",value:function(e){return this._nodeTable.get(e)}},{key:"updateNodes",value:function(){this.setState({nodes:this.state.nodes}),this.updateTransform()}},{key:"reset",value:function(){this.setState({nodes:[]}),this.setTransform(0,0,1)}},{key:"onWheel",value:function(e){e.preventDefault(),e.deltaY>0?this._currentZoom-=.02:e.deltaY<0&&(this._currentZoom+=.02),this._currentZoom=this._currentZoom>=5?5:this._currentZoom,this._currentZoom=this._currentZoom<=.2?.2:this._currentZoom,this.updateTransform(),this._selectedGraphNode&&this._selectedGraphNode.updatePosition(e)}},{key:"getMouseX",value:function(e){return window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}},{key:"getMouseY",value:function(e){return window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}},{key:"onMouseDown",value:function(e){this.mouseDown=!0,document.body.style.cursor="grabbing",this.initialGrabX=this.getMouseX(e)+this._xOffset,this.initialGrabY=this.getMouseY(e)+this._yOffset}},{key:"onMouseUp",value:function(){this.mouseDown=!1,document.body.style.cursor="auto"}},{key:"onMouseMove",value:function(e){if(this.mouseDown){var t=this.getMouseX(e),n=this.getMouseY(e);this.setTransform(this.initialGrabX-t,this.initialGrabY-n,this._currentZoom)}}},{key:"componentDidMount",value:function(){var e=document.getElementById("graph");e&&(e.addEventListener("wheel",this.onWheel.bind(this)),e.addEventListener("mousedown",this.onMouseDown.bind(this)),e.addEventListener("mouseup",this.onMouseUp.bind(this)),e.addEventListener("mouseleave",this.onMouseUp.bind(this)),e.addEventListener("mousemove",this.onMouseMove.bind(this)))}},{key:"renderNodes",value:function(){var e,t=[],n=Object(u.a)(this.state.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(a.a.createElement(N,{key:r.id.toString(),graph:this,node:r}))}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(b,{graph:this}),a.a.createElement("div",{id:"graph",style:{width:1e4,height:1e4,left:-(5e3-window.innerWidth/2),top:-(5e3-window.innerHeight/2)}},this.renderNodes(),a.a.createElement("canvas",null)))}},{key:"currentZoom",get:function(){return this._currentZoom}},{key:"xOffset",get:function(){return this._xOffset}},{key:"yOffset",get:function(){return this._yOffset}},{key:"size",get:function(){return 1e4}},{key:"nodeTable",get:function(){return this._nodeTable}},{key:"selectedGraphNode",set:function(e){this._selectedGraphNode=e},get:function(){return this._selectedGraphNode}},{key:"isMoveable",set:function(e){this.moveable=e},get:function(){return this.moveable}}]),n}(a.a.Component),A=function(){function e(t,n,r){Object(l.a)(this,e),this._roll=void 0,this._pitch=void 0,this._yaw=void 0,this._roll=t,this._pitch=n,this._yaw=r}return Object(c.a)(e,[{key:"toString",value:function(){return"Angle [ roll: ".concat(this._roll," pitch: ").concat(this._pitch," yaw: ").concat(this.yaw," ]")}},{key:"roll",get:function(){return this._roll}},{key:"pitch",get:function(){return this._pitch}},{key:"yaw",get:function(){return this._yaw}}]),e}(),V=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object(l.a)(this,e),this._red=void 0,this._green=void 0,this._blue=void 0,this._alpha=void 0,this._red=t%256,this._green=n%256,this._blue=r%256,this._alpha=a%256}return Object(c.a)(e,[{key:"toString",value:function(){return"Color [ r: ".concat(this._red," g: ").concat(this._green," b: ").concat(this._blue," ]")}},{key:"red",get:function(){return this._red}},{key:"green",get:function(){return this._green}},{key:"blue",get:function(){return this._blue}},{key:"alpha",get:function(){return this._alpha}}]),e}(),M=function(){function e(t,n,r){Object(l.a)(this,e),this._x=void 0,this._y=void 0,this._z=void 0,this._x=t,this._y=n,this._z=r}return Object(c.a)(e,[{key:"toString",value:function(){return"Vector [ x: ".concat(this._x," y: ").concat(this._y," z: ").concat(this._z," ]")}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"z",get:function(){return this._z}}]),e}(),T=function(){function e(t,n,r,a){Object(l.a)(this,e),this._node=void 0,this._name=void 0,this._typeName=void 0,this._value=void 0,this._node=t,this._name=n,this._typeName=r,this._value=a}return Object(c.a)(e,[{key:"node",get:function(){return this._node}},{key:"name",get:function(){return this._name}},{key:"typeName",get:function(){return this._typeName}},{key:"value",set:function(e){this._value=e},get:function(){return this._value}}]),e}(),I=function(){function e(t,n,r,a){Object(l.a)(this,e),this._node=void 0,this._name=void 0,this._staticValue=void 0,this._linkedOutput=void 0,this._typeName=void 0,this._node=t,this._name=n,this._linkedOutput=null,this._staticValue=a,this._typeName=r}return Object(c.a)(e,[{key:"trySetLinkedOutput",value:function(e){return e.typeName===this.typeName&&(this._linkedOutput=e,!0)}},{key:"getValue",value:function(){return this._linkedOutput?this._linkedOutput.value:this._staticValue}},{key:"node",get:function(){return this._node}},{key:"name",get:function(){return this._name}},{key:"typeName",get:function(){return this._typeName}},{key:"staticValue",set:function(e){this._staticValue=e},get:function(){return this._staticValue}},{key:"linkedOutput",get:function(){return this._linkedOutput}}]),e}(),Z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r,a){var o;return Object(l.a)(this,n),(o=t.call(this,e,r)).outputs.set("value",new T(Object(p.a)(o),"value",r,a)),o}return Object(c.a)(n,[{key:"output",get:function(){return this.outputs.get("value")}}]),n}(function(){function e(t,n){Object(l.a)(this,e),this._editor=void 0,this._id=void 0,this._x=void 0,this._y=void 0,this._width=void 0,this._name=void 0,this._color=void 0,this._properties=void 0,this._outputs=void 0,this._id=v.Guid.create(),this._editor=t,this._x=0,this._y=0,this._width=125,this._name=n,this._color=t.factory.getNodeColor(n),this._properties=new Map,this._outputs=new Map}return Object(c.a)(e,[{key:"updateOutputs",value:function(){}},{key:"getProperty",value:function(e){var t=this._properties.get(e);return null===t?null:t}},{key:"setCoordinates",value:function(e,t){this._x=e,this._y=t}},{key:"toJson",value:function(){var e,t=[],n=Object(u.a)(this._outputs);try{for(n.s();!(e=n.n()).done;){var r=Object(s.a)(e.value,2),a=r[0],o=r[1];t.push({name:a,type:o.typeName,value:o.value})}}catch(m){n.e(m)}finally{n.f()}var i,l=[],c=Object(u.a)(this._properties);try{for(c.s();!(i=c.n()).done;){var p=Object(s.a)(i.value,2),h=p[0],d=p[1];l.push({name:h,type:d.typeName,staticValue:d.staticValue,linkedOutput:null==d.linkedOutput?null:{nodeId:d.linkedOutput.node._id.toString(),outputName:d.linkedOutput.name}})}}catch(m){c.e(m)}finally{c.f()}return{id:this._id.toString(),x:this._x,y:this._y,name:this._name,outputs:t,properties:l}}},{key:"properties",get:function(){return this._properties}},{key:"outputs",get:function(){return this._outputs}},{key:"hasOutput",get:function(){return this._outputs.size>0}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"editor",get:function(){return this._editor}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"name",get:function(){return this._name}},{key:"color",get:function(){return this._color}}]),e}()),Y=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(l.a)(this,n),(a=t.call(this,e,"Vector",r)).properties.set("x",new I(Object(p.a)(a),"x","Number",r.x)),a.properties.set("y",new I(Object(p.a)(a),"y","Number",r.y)),a.properties.set("z",new I(Object(p.a)(a),"z","Number",r.z)),a}return Object(c.a)(n,[{key:"updateOutputs",value:function(){var e,t,n,r=null===(e=this.properties.get("x"))||void 0===e?void 0:e.getValue(),a=null===(t=this.properties.get("y"))||void 0===t?void 0:t.getValue(),o=null===(n=this.properties.get("z"))||void 0===n?void 0:n.getValue();this.output.value=new M(r,a,o)}}]),n}(Z),F=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(l.a)(this,n),(a=t.call(this,e,"Angle",r)).properties.set("roll",new I(Object(p.a)(a),"roll","Number",r.roll)),a.properties.set("pitch",new I(Object(p.a)(a),"pitch","Number",r.pitch)),a.properties.set("yaw",new I(Object(p.a)(a),"yaw","Number",r.yaw)),a}return Object(c.a)(n,[{key:"updateOutputs",value:function(){var e,t,n,r=null===(e=this.properties.get("roll"))||void 0===e?void 0:e.getValue(),a=null===(t=this.properties.get("pitch"))||void 0===t?void 0:t.getValue(),o=null===(n=this.properties.get("yaw"))||void 0===n?void 0:n.getValue();this.output.value=new A(r,a,o)}}]),n}(Z),S=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(l.a)(this,n),(a=t.call(this,e,"Toggle",r)).properties.set("value",new I(Object(p.a)(a),"value","Toggle",r)),a}return Object(c.a)(n,[{key:"updateOutputs",value:function(){var e;this.output.value=null===(e=this.properties.get("value"))||void 0===e?void 0:e.getValue()}}]),n}(Z),G=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(l.a)(this,n),(a=t.call(this,e,"Number",r)).properties.set("value",new I(Object(p.a)(a),"value","Number",r)),a}return Object(c.a)(n,[{key:"updateOutputs",value:function(){var e;this.output.value=null===(e=this.properties.get("value"))||void 0===e?void 0:e.getValue()}}]),n}(Z),D=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;return Object(l.a)(this,n),(a=t.call(this,e,"Color",r)).properties.set("red",new I(Object(p.a)(a),"red","Number",r.red)),a.properties.set("green",new I(Object(p.a)(a),"green","Number",r.green)),a.properties.set("blue",new I(Object(p.a)(a),"blue","Number",r.blue)),a.properties.set("alpha",new I(Object(p.a)(a),"alpha","Number",r.alpha)),a}return Object(c.a)(n,[{key:"updateOutputs",value:function(){var e,t,n,r,a=null===(e=this.properties.get("red"))||void 0===e?void 0:e.getValue(),o=null===(t=this.properties.get("green"))||void 0===t?void 0:t.getValue(),i=null===(n=this.properties.get("blue"))||void 0===n?void 0:n.getValue(),s=null===(r=this.properties.get("alpha"))||void 0===r?void 0:r.getValue();this.output.value=new V(a,o,i,s)}}]),n}(Z),L=function(){function e(t){Object(l.a)(this,e),this.editor=void 0,this.editor=t}return Object(c.a)(e,[{key:"createNode",value:function(e){var t;switch(e){case"Number":t=new G(this.editor,0);break;case"Toggle":t=new S(this.editor,!1);break;case"Angle":t=new F(this.editor,new A(0,0,0));break;case"Vector":t=new Y(this.editor,new M(0,0,0));break;case"Color":t=new D(this.editor,new V(255,255,255,255));break;default:t=null}return t}},{key:"getNodeColor",value:function(e){switch(e){case"Number":return"#bc316d";case"Toggle":return"#31bc87";case"Vector":return"#3151bc";case"Angle":return"#5831bc";case"Color":return"#bc31ba";default:return"#8e8e8e"}}}]),e}(),z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e))._graph=void 0,r._factory=void 0,r.currentExplorerCallbackId=void 0,r.fileExplorerCallbacks=void 0,r._graph=null,r._factory=new L(Object(p.a)(r)),r.currentExplorerCallbackId=0,r.fileExplorerCallbacks=[],r}return Object(c.a)(n,[{key:"openFileExplorer",value:function(e){var t;this.fileExplorerCallbacks[++this.currentExplorerCallbackId]=e,null===(t=gmodinterface)||void 0===t||t.openFileExplorer(this.currentExplorerCallbackId)}},{key:"onFileExplorerClosed",value:function(e,t){this.fileExplorerCallbacks[e]&&this.fileExplorerCallbacks[e](t)}},{key:"loadPacJson",value:function(e){}},{key:"compileToPacJson",value:function(){return""}},{key:"save",value:function(){var e;if(this._graph){var t,n=[],r=Object(u.a)(this._graph.nodeTable);try{for(r.s();!(t=r.n()).done;){var a=Object(s.a)(t.value,2)[1];n.push(a.toJson())}}catch(i){r.e(i)}finally{r.f()}var o=JSON.stringify(n);null===(e=gmodinterface)||void 0===e||e.saveFile("test.json",o)}}},{key:"load",value:function(e){}},{key:"resetGraph",value:function(){var e;null===(e=this._graph)||void 0===e||e.reset()}},{key:"onLoadProject",value:function(){this.openFileExplorer(this.load.bind(this))}},{key:"onImportPac3",value:function(){this.openFileExplorer(this.loadPacJson.bind(this))}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("fileExplorerClosed",(function(t){var n=t;e.onFileExplorerClosed(n.id,n.fileContents)}))}},{key:"render",value:function(){return a.a.createElement("div",{id:"editor"},a.a.createElement("div",{id:"editor-menu"},a.a.createElement("div",null,a.a.createElement("button",{onClick:this.onLoadProject.bind(this)},"Load Project"),a.a.createElement("button",{onClick:this.save.bind(this)},"Save Project"),a.a.createElement("button",{onClick:this.resetGraph.bind(this)},"Reset Graph")),a.a.createElement("div",null,a.a.createElement("button",{onClick:this.onImportPac3.bind(this)},"Import PAC3"),a.a.createElement("button",{onClick:this.compileToPacJson.bind(this)},"Export PAC3")),a.a.createElement("h1",null,"Zero Editor")),a.a.createElement(g,{editor:this}),a.a.createElement(C,{editor:this}))}},{key:"factory",get:function(){return this._factory}},{key:"graph",get:function(){return this._graph},set:function(e){this._graph=e}}]),n}(a.a.Component);n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.48051d5a.chunk.js.map