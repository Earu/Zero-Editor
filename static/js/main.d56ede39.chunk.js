(this["webpackJsonpzero-editor"]=this["webpackJsonpzero-editor"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(35)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA8BAMAAAAnEK9/AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURVFRUTMzM3nhs84AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhSURBVEjHY6AYCOIBAqPyo/Kj8qPyo/Kj8sNUnhLAwAAAui1roY+vV8MAAAAASUVORK5CYII="},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(10),a=n.n(i),s=n(1),u=n(2),p=n(3),l=n(4),c=n(7),h=n(6),d=n(5),v=n(16),m=(n(22),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onShowHide",value:function(e){var t,n=e.currentTarget,r="header"===n.className?n.parentElement:null===(t=n.parentElement)||void 0===t?void 0:t.parentElement;if(r){var o=r.getElementsByClassName("content")[0],i=r.getElementsByClassName("header")[0];if(i&&o){var a=i.getElementsByTagName("button")[0];if(a)"none"===o.style.display?(o.style.display="block",a.textContent="-"):(o.style.display="none",a.textContent="+")}}}},{key:"render",value:function(){return o.a.createElement("div",{className:"node-menu-category"},o.a.createElement("div",{className:"header",onClick:this.onShowHide},o.a.createElement("span",null,this.props.title),o.a.createElement("button",{disabled:!0},"-")),o.a.createElement("div",{className:"content"},this.props.children))}}]),n}(o.a.Component)),f=n(12),y=(n(23),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"createDragItem",value:function(){var e=f.Guid.toString(),t=document.createElement("div");return t.id=e,t.style.position="absolute",t.style.zIndex="9995",t.style.width="100px",t.style.height="25px",a.a.render(o.a.createElement(n,{name:this.props.name,editor:this.props.editor}),t),t}},{key:"onItemDropped",value:function(e,t){var n=this.props.editor.factory.createNode(this.props.name);if(null!==n){var r=this.props.editor.graph;if(null!=r){var o=r.pageToGraphCoordinates(e,t),i=o.x,a=o.y;n.setCoordinates(i,a),r.addNode(n)}}}},{key:"onMouseDown",value:function(e){var t=this,n=this.createDragItem();document.body.append(n);var r=function(e,t){n.style.left="".concat(e-50,"px"),n.style.top="".concat(t-12.5,"px")};r(e.pageX,e.pageY);var o=function(e){r(e.pageX,e.pageY)};document.addEventListener("mousemove",o),document.addEventListener("keyup",(function e(t){t.shiftKey&&"Shift"!==t.key&&16!==t.which||(document.removeEventListener("keyup",e),n.onmouseup=null,n.remove())})),n.onmouseup=function(e){e.shiftKey||(document.removeEventListener("mousemove",o),n.onmouseup=null,n.remove()),t.onItemDropped(e.pageX,e.pageY)};document.addEventListener("mouseout",(function e(t){var r=t.pageX,o=t.pageY;o>=0&&o<=window.innerHeight&&r>=0&&r<=window.innerWidth||(n.onmouseup=null,n.remove(),document.removeEventListener("mouseout",e))}))}},{key:"render",value:function(){var e=this.props.editor.factory.getNodeColor(this.props.name);return o.a.createElement("div",{className:"node-menu-item",style:{backgroundImage:"linear-gradient(to right, ".concat(e,", #111)")}},o.a.createElement("div",{onMouseDown:this.onMouseDown.bind(this)},this.props.name))}}]),n}(o.a.Component)),b=(n(24),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={searchResults:r.props.editor.nodeCategories,isSearching:!1},r}return Object(u.a)(n,[{key:"onSearch",value:function(e){var t=e.currentTarget.value;if(t&&""!==t.trim()){t=t.trim().toLowerCase();var n,r=[],o=Object(h.a)(this.props.editor.nodeCategories);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.push({name:i.name,nodeNames:i.nodeNames.filter((function(e){return e.toLowerCase().includes(t)}))})}}catch(a){o.e(a)}finally{o.f()}this.setState({searchResults:r,isSearching:!0})}else this.setState({searchResults:this.props.editor.nodeCategories,isSearching:!1})}},{key:"renderItems",value:function(){var e,t=this,n=[],r=Object(h.a)(this.state.searchResults);try{var i=function(){var r=e.value,i=r.name;t.state.isSearching&&(i+=" (".concat(r.nodeNames.length,")")),n.push(o.a.createElement(m,{key:"node_menu_category_".concat(r.name),title:i},r.nodeNames.map((function(e){return o.a.createElement(y,{key:"node_menu_item_".concat(r.name,"_").concat(e),name:e,editor:t.props.editor})}))))};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}},{key:"render",value:function(){return o.a.createElement("div",{id:"node-selector-menu"},o.a.createElement("input",{type:"text",placeholder:"search nodes...",onInput:this.onSearch.bind(this)}),o.a.createElement("hr",null),this.renderItems())}}]),n}(o.a.Component)),g=(n(25),n(26),n(27),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onResetTransform",value:function(){this.props.graph.setTransform(0,0,1)}},{key:"onChangeX",value:function(e){var t=parseInt(e.target.value);isNaN(t)||this.props.graph.setTransform(t,null,null)}},{key:"onChangeY",value:function(e){var t=parseInt(e.target.value);isNaN(t)||this.props.graph.setTransform(null,t,null)}},{key:"onChangeZ",value:function(e){var t=parseFloat(e.target.value);isNaN(t)||this.props.graph.setTransform(null,null,t)}},{key:"setInputFilter",value:function(e,t){var n=function(n){if(!t(e.value))return n.preventDefault(),!1};["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){return e.addEventListener(t,n)}))}},{key:"componentDidMount",value:function(){var e=/^-?[0-9]*\.?[0-9]*$/,t=document.getElementById("graph-control-x"),n=document.getElementById("graph-control-y"),r=document.getElementById("graph-control-z");t&&n&&r&&(this.setInputFilter(t,(function(t){return e.test(t)})),this.setInputFilter(n,(function(t){return e.test(t)})),this.setInputFilter(r,(function(t){return e.test(t)})))}},{key:"render",value:function(){return o.a.createElement("div",{id:"graph-controls"},o.a.createElement("button",{onMouseDown:this.onResetTransform.bind(this)},"\u27f2"),o.a.createElement("label",{htmlFor:"graph-control-x"},"X"),o.a.createElement("input",{id:"graph-control-x",type:"text",placeholder:"X",defaultValue:"0",onChange:this.onChangeX.bind(this)}),o.a.createElement("label",{htmlFor:"graph-control-y"},"Y"),o.a.createElement("input",{id:"graph-control-y",type:"text",placeholder:"Y",defaultValue:"0",onChange:this.onChangeY.bind(this)}),o.a.createElement("label",{htmlFor:"graph-control-z"},"Z"),o.a.createElement("input",{id:"graph-control-z",type:"text",placeholder:"Z",defaultValue:"10.00",onChange:this.onChangeZ.bind(this)}))}}]),n}(o.a.Component)),O=(n(28),n(29),n(30),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._userSelectionRef=void 0,r._userSelectionRef=o.a.createRef(),r.props.property.addListener("update",(function(){return r.update()})),r}return Object(u.a)(n,[{key:"update",value:function(){}},{key:"onMouseUp",value:function(){if(this.props.graph.selectedGraphNodeIO instanceof k){var e,t,n=this.props.graph.selectedGraphNodeIO.props.output;if(this.props.property.trySetLinkedOutput(n))null===(e=this.props.property.userSelector)||void 0===e||e.classList.add("linked"),null===(t=n.userSelector)||void 0===t||t.classList.add("linked"),this.props.property.emit("update");this.props.graph.selectedGraphNodeIO=null,this.props.graph.isMoveable=!0}this.props.graph.selectedGraphNodeIO===this&&(this.props.graph.selectedGraphNodeIO=null,this.props.graph.isMoveable=!0)}},{key:"onMouseDown",value:function(){var e;null===(e=this.props.property.userSelector)||void 0===e||e.classList.remove("linked");var t,n=this.props.property.linkedOutput;n&&1===n.linkedProperties.length&&(null===(t=n.userSelector)||void 0===t||t.classList.remove("linked"));this.props.property.trySetLinkedOutput(null),this.props.property.emit("update"),this.props.graph.selectedGraphNodeIO=this,this.props.graph.isMoveable=!1}},{key:"componentDidMount",value:function(){this.props.property.userSelector=this._userSelectionRef.current}},{key:"componentWillUnmount",value:function(){var e,t,n=this.props.property.linkedOutput;n&&1===n.linkedProperties.length&&(null===(t=n.userSelector)||void 0===t||t.classList.remove("linked"));null===(e=this.props.property.userSelector)||void 0===e||e.classList.remove("linked"),this.props.property.trySetLinkedOutput(null),this.props.property.emit("update")}}]),n}(o.a.Component)),k=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._userSelectionRef=void 0,r._userSelectionRef=o.a.createRef(),r}return Object(u.a)(n,[{key:"onMouseDown",value:function(){this.props.graph.selectedGraphNodeIO=this,this.props.graph.isMoveable=!1}},{key:"onMouseUp",value:function(){if(this.props.graph.selectedGraphNodeIO instanceof O){var e,t,n=this.props.graph.selectedGraphNodeIO.props.property;if(n.trySetLinkedOutput(this.props.output))null===(e=n.userSelector)||void 0===e||e.classList.add("linked"),null===(t=this.props.output.userSelector)||void 0===t||t.classList.add("linked"),n.emit("update");this.props.graph.selectedGraphNodeIO=null,this.props.graph.isMoveable=!0}this.props.graph.selectedGraphNodeIO===this&&(this.props.graph.selectedGraphNodeIO=null,this.props.graph.isMoveable=!0)}},{key:"componentDidMount",value:function(){this.props.output.userSelector=this._userSelectionRef.current}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.props.output.userSelector)||void 0===e||e.classList.remove("linked");var t,n=Object(h.a)(this.props.output.linkedProperties);try{for(n.s();!(t=n.n()).done;){var r,o=t.value;null===(r=o.userSelector)||void 0===r||r.classList.remove("linked"),o.trySetLinkedOutput(null),o.emit("update")}}catch(i){n.e(i)}finally{n.f()}}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-output",onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("span",null,this.props.name),o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef}))}}]),n}(o.a.Component),_=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).DOMElementRef=void 0,r.offsetX=void 0,r.offsetY=void 0,r.offsetZoom=void 0,r.DOMElementRef=o.a.createRef(),r.offsetX=0,r.offsetY=0,r.offsetZoom=0,r}return Object(u.a)(n,[{key:"onMouseDown",value:function(e){var t=this.props.node.x,n=this.props.node.y,r=this.props.graph.graphToPageCoordinates(t,n),o=this.props.graph.currentZoom;this.offsetX=e.pageX-r.x,this.offsetY=e.pageY-r.y,this.offsetZoom=o,this.props.graph.selectGraphNode(this),this.props.graph.isMoveable=!1}},{key:"onMouseUp",value:function(){this.props.graph.isGraphNodeSelected(this)&&(this.props.graph.unselectGraphNode(this),this.props.graph.isMoveable=!0)}},{key:"onKeyDown",value:function(e){"Escape"!==e.key&&27!==e.which||this.onMouseUp()}},{key:"onMouseMove",value:function(e){this.props.graph.isGraphNodeSelected(this)&&this.updatePosition(e)}},{key:"onClose",value:function(){this.props.graph.removeNode(this.props.node.id)}},{key:"updatePosition",value:function(e){var t=1+(this.props.graph.currentZoom-this.offsetZoom)/this.offsetZoom,n=this.props.graph.pageToGraphCoordinates(e.pageX-this.offsetX*t,e.pageY-this.offsetY*t);this.props.node.setCoordinates(n.x,n.y),this.props.graph.updateNodes()}},{key:"setSelected",value:function(e){this.DOMElementRef.current&&(this.DOMElementRef.current.style.border=e?"1px dashed orange":"none")}},{key:"componentDidMount",value:function(){var e=this.props.graph.DOMElement;e&&e.addEventListener("mousemove",this.onMouseMove.bind(this)),document.body.addEventListener("keydown",this.onKeyDown.bind(this))}},{key:"componentWillUnmount",value:function(){var e=this.props.graph.DOMElement;e&&e.removeEventListener("mousemove",this.onMouseMove),document.body.addEventListener("keydown",this.onKeyDown)}},{key:"renderProperties",value:function(){var e,t=[],n=Object(h.a)(this.props.node.properties);try{for(n.s();!(e=n.n()).done;){var r=Object(c.a)(e.value,2),o=r[0],i=r[1],a="".concat(this.props.node.id,"_").concat(o);t.push(this.props.graph.editor.factory.createGraphNodeProperty(a,this.props.node,i,this.props.graph))}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"renderOutputs",value:function(){var e,t=[],n=Object(h.a)(this.props.node.outputs);try{for(n.s();!(e=n.n()).done;){var r=Object(c.a)(e.value,2),i=r[0],a=r[1],s="".concat(this.props.node.id,"_").concat(i);t.push(o.a.createElement(k,{key:s,name:i,output:a,graph:this.props.graph}))}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node",style:{position:"absolute",left:this.props.node.x,top:this.props.node.y,width:this.props.node.width},ref:this.DOMElementRef},o.a.createElement("div",{style:{backgroundImage:"linear-gradient(to right, ".concat(this.props.node.color,", #111)"),height:21,cursor:"move"},onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),className:"header"},o.a.createElement("div",null,this.props.node.name),o.a.createElement("button",{onClick:this.onClose.bind(this)},"x")),o.a.createElement("div",{className:"content"},this.renderProperties(),this.props.node.outputs.size>0?o.a.createElement("hr",null):o.a.createElement("div",null),this.renderOutputs()))}}]),n}(o.a.Component),N=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).DOMElementRef=void 0,r._currentZoom=void 0,r.mouseDown=void 0,r.moveable=void 0,r.initialGrabX=void 0,r.initialGrabY=void 0,r._xOffset=void 0,r._yOffset=void 0,r._nodeTable=void 0,r.selectedGraphNodes=void 0,r._selectedGraphNodeIO=void 0,r._canvas=void 0,r._canvasContext=void 0,r._mouseX=void 0,r._mouseY=void 0,r.DOMElementRef=o.a.createRef(),r._currentZoom=1,r.mouseDown=!1,r.moveable=!0,r.initialGrabX=0,r.initialGrabY=0,r._xOffset=0,r._yOffset=0,r.selectedGraphNodes=new Map,r._selectedGraphNodeIO=null,r._canvas=null,r._canvasContext=null,r._mouseX=0,r._mouseY=0,r.props.editor.graph=Object(d.a)(r),r._nodeTable=new Map,r.state={nodes:[]},r}return Object(u.a)(n,[{key:"selectGraphNode",value:function(e){this.selectedGraphNodes.set(e.props.node.id,e),e.setSelected(!0)}},{key:"unselectGraphNode",value:function(e){this.selectedGraphNodes.delete(e.props.node.id),e.setSelected(!1)}},{key:"isGraphNodeSelected",value:function(e){return this.selectedGraphNodes.has(e.props.node.id)}},{key:"pageToGraphCoordinates",value:function(e,t){var n=window.innerWidth,r=window.innerHeight,o=this._currentZoom,i=(this._xOffset-n/2)/o,a=(this._yOffset-r/2)/o,s=this.size/2;return{x:s+i+e/o,y:s+a+t/o}}},{key:"graphToPageCoordinates",value:function(e,t){var n=window.innerWidth,r=window.innerHeight,o=this._currentZoom,i=(this._xOffset-n/2)/o,a=(this._yOffset-r/2)/o,s=this.size/2;return{x:(e-s-i)*o,y:(t-s-a)*o}}},{key:"updateTransform",value:function(){var e=this.DOMElementRef.current;e&&(e.style.transform="translateX(".concat(-this._xOffset,"px) translateY(").concat(-this._yOffset,"px) scale(").concat(this._currentZoom,")"));var t=document.getElementById("graph-controls");if(t){var n=t.getElementsByTagName("input"),r=n[0],o=n[1],i=n[2];r.value=(this._xOffset/this._currentZoom).toFixed(0),o.value=(this._yOffset/this._currentZoom).toFixed(0),i.value=(10*this._currentZoom).toFixed(2)}}},{key:"setTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.moveable){var r=5e3*this._currentZoom+250;if(null!=e){var o=5e3*this._currentZoom+250;this._xOffset=e>o?o:e<-r?-r:e}if(null!=t){var i=5e3*this._currentZoom+250;this._yOffset=t>i?i:t<-r?-r:t}null!=n&&(this._currentZoom=n>=5?5:n),this.updateTransform()}}},{key:"addNode",value:function(e){this._nodeTable.set(e.id,e),this.state.nodes.push(e),this.updateNodes()}},{key:"removeNode",value:function(e){var t=this.state.nodes.filter((function(t){return t.id!==e}));this._nodeTable.delete(e),this.setState({nodes:t}),this.updateTransform()}},{key:"getNode",value:function(e){return this._nodeTable.get(e)}},{key:"updateNodes",value:function(){this.setState({nodes:this.state.nodes}),this.updateTransform()}},{key:"reset",value:function(){this.setState({nodes:[]}),this.setTransform(0,0,1)}},{key:"backplaneMouseUp",value:function(){this._selectedGraphNodeIO&&(this._selectedGraphNodeIO=null,this.moveable=!0)}},{key:"graphMouseLeave",value:function(){this._selectedGraphNodeIO&&(this._selectedGraphNodeIO=null,this.moveable=!0)}},{key:"onWheel",value:function(e){e.preventDefault(),e.deltaY>0?this._currentZoom-=.02:e.deltaY<0&&(this._currentZoom+=.02),this._currentZoom=this._currentZoom>=5?5:this._currentZoom,this._currentZoom=this._currentZoom<=.2?.2:this._currentZoom,this.updateTransform();var t,n=Object(h.a)(this.selectedGraphNodes);try{for(n.s();!(t=n.n()).done;){Object(c.a)(t.value,2)[1].updatePosition(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"getMouseX",value:function(e){return window.Event?e.pageX:e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}},{key:"getMouseY",value:function(e){return window.Event?e.pageY:e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}},{key:"onMouseDown",value:function(e){this.mouseDown=!0,document.body.style.cursor="grabbing",this.initialGrabX=this.getMouseX(e)+this._xOffset,this.initialGrabY=this.getMouseY(e)+this._yOffset}},{key:"onMouseUp",value:function(){this.mouseDown=!1,document.body.style.cursor="auto"}},{key:"onMouseMove",value:function(e){if(this._mouseX=this.getMouseX(e),this._mouseY=this.getMouseY(e),this.mouseDown){var t=this.getMouseX(e),n=this.getMouseY(e);this.setTransform(this.initialGrabX-t,this.initialGrabY-n,this._currentZoom)}}},{key:"componentDidMount",value:function(){var e=this.DOMElementRef.current;e&&(e&&(e.addEventListener("wheel",this.onWheel.bind(this)),e.addEventListener("mousedown",this.onMouseDown.bind(this)),e.addEventListener("mouseup",this.onMouseUp.bind(this)),e.addEventListener("mouseleave",this.onMouseUp.bind(this)),e.addEventListener("mousemove",this.onMouseMove.bind(this))),this._canvas=document.getElementById("canvas"),this._canvas&&(this._canvasContext=this._canvas.getContext("2d"),window.requestAnimationFrame(this.renderNodesCanvas.bind(this))))}},{key:"renderNodesCanvas",value:function(){if(this._canvas&&this._canvasContext){var e=this._canvas,t=this._canvasContext;if(e.width=window.innerWidth,e.height=window.innerHeight,t.clearRect(0,0,e.width,e.height),t.strokeStyle="#eeeeee",t.lineWidth=3*this._currentZoom,this._selectedGraphNodeIO){var n=this._selectedGraphNodeIO instanceof O?this._selectedGraphNodeIO.props.property.userSelector:this._selectedGraphNodeIO.props.output.userSelector;if(n){var r=n.getBoundingClientRect(),o=(r.left+r.right)/2,i=(r.top+r.bottom)/2;t.beginPath(),t.moveTo(o,i),t.lineTo(this._mouseX,this._mouseY),t.stroke()}}var a,s=Object(h.a)(this.state.nodes);try{for(s.s();!(a=s.n()).done;){var u,p=a.value,l=Object(h.a)(p.properties);try{for(l.s();!(u=l.n()).done;){var d=Object(c.a)(u.value,2)[1];if(d.linkedOutput&&d.userSelector&&d.linkedOutput.userSelector){var v=d.userSelector.getBoundingClientRect(),m=d.linkedOutput.userSelector.getBoundingClientRect(),f=(v.left+v.right)/2,y=(v.top+v.bottom)/2,b=(m.left+m.right)/2,g=(m.top+m.bottom)/2,k=Math.abs(f-b)/(b<f?2:1);t.beginPath(),t.moveTo(f,y),t.bezierCurveTo(f-k,y,b+k,g,b,g),t.stroke()}}}catch(_){l.e(_)}finally{l.f()}}}catch(_){s.e(_)}finally{s.f()}window.requestAnimationFrame(this.renderNodesCanvas.bind(this))}}},{key:"renderNodes",value:function(){var e,t=[],n=Object(h.a)(this.state.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(o.a.createElement(_,{key:r.id.toString(),graph:this,node:r}))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(g,{graph:this}),o.a.createElement("div",{id:"graph",style:{width:1e4,height:1e4,left:-(5e3-window.innerWidth/2),top:-(5e3-window.innerHeight/2)},onMouseLeave:this.graphMouseLeave.bind(this),ref:this.DOMElementRef},o.a.createElement("div",{id:"backplane",onMouseUp:this.backplaneMouseUp.bind(this)}),this.renderNodes()),o.a.createElement("canvas",{id:"canvas"}))}},{key:"editor",get:function(){return this.props.editor}},{key:"DOMElement",get:function(){return this.DOMElementRef.current}},{key:"currentZoom",get:function(){return this._currentZoom}},{key:"xOffset",get:function(){return this._xOffset}},{key:"yOffset",get:function(){return this._yOffset}},{key:"size",get:function(){return 1e4}},{key:"nodeTable",get:function(){return this._nodeTable}},{key:"selectedGraphNodeIO",set:function(e){this._selectedGraphNodeIO=e},get:function(){return this._selectedGraphNodeIO}},{key:"isMoveable",set:function(e){this.moveable=e},get:function(){return this.moveable}}]),n}(o.a.Component),E=(n(31),n(32),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"modal",style:this.props.style},o.a.createElement("div",{className:"header"},o.a.createElement("span",null,this.props.title),o.a.createElement("button",{onClick:this.props.onClose},"x")),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"message"},this.props.message),this.props.children))}}]),n}(o.a.Component)),j=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e))._scheme=void 0,o._scheme=r,o}return Object(u.a)(n,[{key:"scheme",set:function(e){this._scheme=e},get:function(){return this._scheme}}]),n}(Object(v.a)(Event)),w=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e))._graph=void 0,r.promptInput=void 0,r._graph=null,r.promptInput=o.a.createRef(),r.props.factory.editor=Object(d.a)(r),r.state={currentProjectName:null,showPrompt:!1,promptTitle:"",promptMessage:"",showPromptInput:!1,promptConfirm:function(){}},r}return Object(u.a)(n,[{key:"prompt",value:function(e,t,n,r){this.setState({currentProjectName:this.state.currentProjectName,showPrompt:!0,promptTitle:e,promptMessage:t,showPromptInput:n,promptConfirm:r})}},{key:"pushEvent",value:function(e,t){document.dispatchEvent(new j(e,t))}},{key:"load",value:function(e){}},{key:"resetGraph",value:function(){var e=this;if(this._graph)if(this._graph.nodeTable.size>0)this.prompt("Reset Graph","Are you sure that you want to reset the graph?",!1,(function(){var t,n=e.state;n.currentProjectName=null,e.setState(n),null===(t=e._graph)||void 0===t||t.reset()}));else{var t=this.state;t.currentProjectName=null,this.setState(t),this._graph.reset()}}},{key:"compileGraph",value:function(){if(!this._graph)return"";var e,t=[],n=Object(h.a)(this._graph.nodeTable);try{for(n.s();!(e=n.n()).done;){var r=Object(c.a)(e.value,2)[1];t.push(r.toJson())}}catch(o){n.e(o)}finally{n.f()}return JSON.stringify(t)}},{key:"onLoadProject",value:function(){var e={editor:this,value:""};this.pushEvent("editorLoad",e),this.load(e.value)}},{key:"onSave",value:function(){var e=this;null===this.state.currentProjectName&&this.prompt("Project Name","Enter a name for your project",!0,(function(t){if(t){""===t.trim()&&(t="Unknown Project");var n=e.state;n.currentProjectName=t,e.setState(n);var r=e.compileGraph();e.pushEvent("editorSave",{editor:e,value:r})}}));var t=this.compileGraph();this.pushEvent("editorSave",{editor:this,value:t})}},{key:"onContextMenu",value:function(e){e.preventDefault()}},{key:"onPromptConfirm",value:function(){if(this.promptInput.current){this.state.showPromptInput?this.state.promptConfirm(this.promptInput.current.value):this.state.promptConfirm(null);var e=this.state;e.showPrompt=!1,this.setState(e)}}},{key:"onPromptClose",value:function(){var e=this.state;e.showPrompt=!1,this.setState(e)}},{key:"renderMenu",value:function(){var e,t=[],n=0,r=Object(h.a)(this.props.menu);try{var i=function(){var r=e.value,i="editor_menu_".concat(n++);t.push(o.a.createElement("div",{key:i},r.buttons.map((function(e){return o.a.createElement("button",{key:"".concat(i,"_").concat(e.name),onClick:e.callback},e.name)}))))};for(r.s();!(e=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return t}},{key:"render",value:function(){return o.a.createElement("div",{id:"editor",onContextMenu:this.onContextMenu},o.a.createElement(E,{title:this.state.promptTitle,message:this.state.promptMessage,onClose:this.onPromptClose.bind(this),style:{display:this.state.showPrompt?"block":"none"}},o.a.createElement("input",{className:"editor-prompt-input",type:"text",placeholder:"type here...",style:{display:this.state.showPromptInput?"block":"none"},ref:this.promptInput}),o.a.createElement("div",{style:{display:"inline-block",margin:"auto"}},o.a.createElement("button",{className:"editor-prompt-btn",onClick:this.onPromptConfirm.bind(this)},"Ok"),o.a.createElement("button",{className:"editor-prompt-btn",onClick:this.onPromptClose.bind(this)},"Cancel"))),o.a.createElement("div",{id:"editor-menu"},o.a.createElement("div",null,o.a.createElement("button",{onClick:this.onLoadProject.bind(this)},"Load Project"),o.a.createElement("button",{onClick:this.onSave.bind(this)},"Save Project"),o.a.createElement("button",{onClick:this.resetGraph.bind(this)},"Reset Graph")),this.renderMenu(),o.a.createElement("span",null,null===this.state.currentProjectName?"Unknown Project":this.state.currentProjectName),o.a.createElement("h1",null,this.props.title)),o.a.createElement(b,{editor:this}),o.a.createElement(N,{editor:this}))}},{key:"factory",get:function(){return this.props.factory}},{key:"nodeCategories",get:function(){return this.props.nodeCategories}},{key:"graph",get:function(){return this._graph},set:function(e){this._graph=e}}]),n}(o.a.Component),x=function(){function e(){Object(s.a)(this,e),this._editor=void 0,this._editor=null}return Object(u.a)(e,[{key:"createNode",value:function(e){return null}},{key:"createGraphNodeProperty",value:function(e,t,n,r){return o.a.createElement("div",null)}},{key:"getNodeColor",value:function(e){return"#8e8e8e"}},{key:"editor",set:function(e){this._editor=e},get:function(){return this._editor}}]),e}(),M=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r,o,i){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return Object(s.a)(this,n),(a=t.call(this))._node=void 0,a._name=void 0,a._staticValue=void 0,a._linkedOutput=void 0,a._typeName=void 0,a._userSelector=null,a.coerceValue=void 0,a._node=e,a._name=r,a._linkedOutput=null,a._staticValue=i,a._typeName=o,a.coerceValue=u,a}return Object(u.a)(n,[{key:"outputExistsLaterInBranch",value:function(e){for(var t=[this.node],n=[];t.length>0;){var r=t.pop();if(r){n.push(r);var o,i=Object(h.a)(r.outputs);try{for(i.s();!(o=i.n()).done;){var a=Object(c.a)(o.value,2)[1];if(a.linkedProperties){var s,u=Object(h.a)(a.linkedProperties);try{for(u.s();!(s=u.n()).done;){var p=s.value;t.push(p.node)}}catch(m){u.e(m)}finally{u.f()}}}}catch(m){i.e(m)}finally{i.f()}}}for(var l=0,d=n;l<d.length;l++){var v=d[l];if(e.node===v)return!0}return!1}},{key:"trySetLinkedOutput",value:function(e){var t=this;return e?e.typeName===this.typeName&&e.node.id!==this._node.id&&(!this.outputExistsLaterInBranch(e)&&(this._linkedOutput=e,this._linkedOutput.linkedProperties.push(this),!0)):(this._linkedOutput&&(this._linkedOutput.linkedProperties=this._linkedOutput.linkedProperties.filter((function(e){return e!==t}))),this._linkedOutput=null,!0)}},{key:"getValue",value:function(){return this._linkedOutput?this.coerceValue(this._linkedOutput.value):this.coerceValue(this._staticValue)}},{key:"userSelector",set:function(e){this._userSelector=e},get:function(){return this._userSelector}},{key:"node",get:function(){return this._node}},{key:"name",get:function(){return this._name}},{key:"typeName",get:function(){return this._typeName}},{key:"staticValue",set:function(e){this._staticValue=this.coerceValue(e)},get:function(){return this._staticValue}},{key:"linkedOutput",get:function(){return this._linkedOutput}}]),n}(n(15).EventEmitter),C=function(){function e(t,n){Object(s.a)(this,e),this._editor=void 0,this._id=void 0,this._x=void 0,this._y=void 0,this._width=void 0,this._name=void 0,this._color=void 0,this._properties=void 0,this._outputs=void 0,this._id=f.Guid.create(),this._editor=t,this._x=0,this._y=0,this._width=125,this._name=n,this._color=t.factory.getNodeColor(n),this._properties=new Map,this._outputs=new Map}return Object(u.a)(e,[{key:"updateOutputs",value:function(){}},{key:"getProperty",value:function(e){var t=this._properties.get(e);return null===t?null:t}},{key:"setCoordinates",value:function(e,t){this._x=e,this._y=t}},{key:"toJson",value:function(){var e,t=[],n=Object(h.a)(this._outputs);try{for(n.s();!(e=n.n()).done;){var r=Object(c.a)(e.value,2),o=r[0],i=r[1];t.push({name:o,type:i.typeName,value:i.value})}}catch(v){n.e(v)}finally{n.f()}var a,s=[],u=Object(h.a)(this._properties);try{for(u.s();!(a=u.n()).done;){var p=Object(c.a)(a.value,2),l=p[0],d=p[1];s.push({name:l,type:d.typeName,staticValue:d.staticValue,linkedOutput:null==d.linkedOutput?null:{nodeId:d.linkedOutput.node._id.toString(),outputName:d.linkedOutput.name}})}}catch(v){u.e(v)}finally{u.f()}return{id:this._id.toString(),x:this._x,y:this._y,name:this._name,outputs:t,properties:s}}},{key:"properties",get:function(){return this._properties}},{key:"outputs",get:function(){return this._outputs}},{key:"hasOutput",get:function(){return this._outputs.size>0}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"editor",get:function(){return this._editor}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"name",get:function(){return this._name}},{key:"color",get:function(){return this._color}}]),e}(),S=function(){function e(t,n,r,o){Object(s.a)(this,e),this._node=void 0,this._name=void 0,this._typeName=void 0,this._value=void 0,this._userSelector=null,this._linkedProperties=void 0,this._node=t,this._name=n,this._typeName=r,this._value=o,this._linkedProperties=[]}return Object(u.a)(e,[{key:"node",get:function(){return this._node}},{key:"name",get:function(){return this._name}},{key:"typeName",get:function(){return this._typeName}},{key:"value",set:function(e){this._value=e;var t,n=Object(h.a)(this._linkedProperties);try{for(n.s();!(t=n.n()).done;){t.value.emit("update")}}catch(r){n.e(r)}finally{n.f()}},get:function(){return this._value}},{key:"userSelector",set:function(e){this._userSelector=e},get:function(){return this._userSelector}},{key:"linkedProperties",get:function(){return this._linkedProperties},set:function(e){this._linkedProperties=e}}]),e}(),V=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r,o){var i;return Object(s.a)(this,n),(i=t.call(this,e,r)).outputs.set("value",new S(Object(d.a)(i),"value",r,o)),i}return Object(u.a)(n,[{key:"output",get:function(){return this.outputs.get("value")}}]),n}(C),P=function(){function e(t,n,r){Object(s.a)(this,e),this._roll=void 0,this._pitch=void 0,this._yaw=void 0,this._roll=t,this._pitch=n,this._yaw=r}return Object(u.a)(e,[{key:"toString",value:function(){return"Angle [ roll: ".concat(this._roll," pitch: ").concat(this._pitch," yaw: ").concat(this.yaw," ]")}},{key:"roll",get:function(){return this._roll}},{key:"pitch",get:function(){return this._pitch}},{key:"yaw",get:function(){return this._yaw}}]),e}(),R=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Angle",r)).properties.set("roll",new M(Object(d.a)(o),"roll","Number",r.roll,o.coerceValue)),o.properties.set("pitch",new M(Object(d.a)(o),"pitch","Number",r.pitch,o.coerceValue)),o.properties.set("yaw",new M(Object(d.a)(o),"yaw","Number",r.yaw,o.coerceValue)),o}return Object(u.a)(n,[{key:"coerceValue",value:function(e){return e%180}},{key:"updateOutputs",value:function(){var e,t,n,r=null===(e=this.properties.get("roll"))||void 0===e?void 0:e.getValue(),o=null===(t=this.properties.get("pitch"))||void 0===t?void 0:t.getValue(),i=null===(n=this.properties.get("yaw"))||void 0===n?void 0:n.getValue();this.output.value=new P(r,o,i)}}]),n}(V),A=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;Object(s.a)(this,e),this._red=void 0,this._green=void 0,this._blue=void 0,this._alpha=void 0,this._red=t,this._green=n,this._blue=r,this._alpha=o}return Object(u.a)(e,[{key:"toString",value:function(){return"Color [ r: ".concat(this._red," g: ").concat(this._green," b: ").concat(this._blue," ]")}},{key:"red",get:function(){return this._red}},{key:"green",get:function(){return this._green}},{key:"blue",get:function(){return this._blue}},{key:"alpha",get:function(){return this._alpha}}]),e}(),G=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Color",r)).properties.set("red",new M(Object(d.a)(o),"red","Number",r.red,o.coerceValue)),o.properties.set("green",new M(Object(d.a)(o),"green","Number",r.green,o.coerceValue)),o.properties.set("blue",new M(Object(d.a)(o),"blue","Number",r.blue,o.coerceValue)),o.properties.set("alpha",new M(Object(d.a)(o),"alpha","Number",r.alpha,o.coerceValue)),o}return Object(u.a)(n,[{key:"coerceValue",value:function(e){return Math.max(Math.min(e,255),-255)}},{key:"updateOutputs",value:function(){var e,t,n,r,o=null===(e=this.properties.get("red"))||void 0===e?void 0:e.getValue(),i=null===(t=this.properties.get("green"))||void 0===t?void 0:t.getValue(),a=null===(n=this.properties.get("blue"))||void 0===n?void 0:n.getValue(),s=null===(r=this.properties.get("alpha"))||void 0===r?void 0:r.getValue();this.output.value=new A(o,i,a,s)}}]),n}(V),I=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Number",r)).properties.set("value",new M(Object(d.a)(o),"value","Number",r)),o}return Object(u.a)(n,[{key:"updateOutputs",value:function(){var e;this.output.value=null===(e=this.properties.get("value"))||void 0===e?void 0:e.getValue()}}]),n}(V),D=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Toggle",r)).properties.set("value",new M(Object(d.a)(o),"value","Toggle",r)),o}return Object(u.a)(n,[{key:"updateOutputs",value:function(){var e;this.output.value=null===(e=this.properties.get("value"))||void 0===e?void 0:e.getValue()}}]),n}(V),T=function(){function e(t,n,r){Object(s.a)(this,e),this._x=void 0,this._y=void 0,this._z=void 0,this._x=t,this._y=n,this._z=r}return Object(u.a)(e,[{key:"toString",value:function(){return"Vector [ x: ".concat(this._x," y: ").concat(this._y," z: ").concat(this._z," ]")}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"z",get:function(){return this._z}}]),e}(),Y=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Vector",r)).properties.set("x",new M(Object(d.a)(o),"x","Number",r.x)),o.properties.set("y",new M(Object(d.a)(o),"y","Number",r.y)),o.properties.set("z",new M(Object(d.a)(o),"z","Number",r.z)),o}return Object(u.a)(n,[{key:"updateOutputs",value:function(){var e,t,n,r=null===(e=this.properties.get("x"))||void 0===e?void 0:e.getValue(),o=null===(t=this.properties.get("y"))||void 0===t?void 0:t.getValue(),i=null===(n=this.properties.get("z"))||void 0===n?void 0:n.getValue();this.output.value=new T(r,o,i)}}]),n}(V),L=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e,"Model")).properties.set("path",new M(Object(d.a)(r),"path","Text","")),r.properties.set("texture",new M(Object(d.a)(r),"texture","Text","")),r.properties.set("color",new M(Object(d.a)(r),"color","Color",new A(255,255,255))),r}return n}(C),Z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e,r){var o;return Object(s.a)(this,n),(o=t.call(this,e,"Text",r)).properties.set("value",new M(Object(d.a)(o),"value","Text",r)),o}return Object(u.a)(n,[{key:"updateOutputs",value:function(){var e;this.output.value=null===(e=this.properties.get("value"))||void 0===e?void 0:e.getValue()}}]),n}(V),U=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputRoll=void 0,r.inputPitch=void 0,r.inputYaw=void 0,r.inputRoll=o.a.createRef(),r.inputPitch=o.a.createRef(),r.inputYaw=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){var e=this.props.property.getValue(),t=null!==this.props.property.linkedOutput;this.inputRoll.current&&(this.inputRoll.current.value=e.roll.toString(),this.inputRoll.current.disabled=t),this.inputPitch.current&&(this.inputPitch.current.value=e.pitch.toString(),this.inputPitch.current.disabled=t),this.inputYaw.current&&(this.inputYaw.current.value=e.yaw.toString(),this.inputYaw.current.disabled=t),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){if(this.inputPitch.current&&this.inputRoll.current&&this.inputYaw.current){var e=parseFloat(this.inputRoll.current.value),t=parseFloat(this.inputPitch.current.value),n=parseFloat(this.inputYaw.current.value),r=this.props.property.staticValue;this.props.property.staticValue=new P(isNaN(e)?r.roll:e,isNaN(t)?r.pitch:t,isNaN(n)?r.yaw:n),this.props.node.updateOutputs()}}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("div",null,this.props.name),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_roll")},"Roll"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_roll"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().roll,onChange:this.updateNodeOutput.bind(this),ref:this.inputRoll}),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_pitch")},"Pitch"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_pitch"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().pitch,onChange:this.updateNodeOutput.bind(this),ref:this.inputPitch}),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_yaw")},"Yaw"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_yaw"),type:"text",min:-360,max:360,placeholder:this.props.name,defaultValue:this.props.property.getValue().yaw,onChange:this.updateNodeOutput.bind(this),ref:this.inputYaw}))}}]),n}(O),B=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputX=void 0,r.inputY=void 0,r.inputZ=void 0,r.inputX=o.a.createRef(),r.inputY=o.a.createRef(),r.inputZ=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){var e=this.props.property.getValue(),t=null!==this.props.property.linkedOutput;this.inputX.current&&(this.inputX.current.value=e.x.toString(),this.inputX.current.disabled=t),this.inputY.current&&(this.inputY.current.value=e.y.toString(),this.inputY.current.disabled=t),this.inputZ.current&&(this.inputZ.current.value=e.z.toString(),this.inputZ.current.disabled=t),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){if(this.inputX.current&&this.inputY.current&&this.inputZ.current){var e=parseFloat(this.inputX.current.value),t=parseFloat(this.inputY.current.value),n=parseFloat(this.inputZ.current.value),r=this.props.property.staticValue;this.props.property.staticValue=new T(isNaN(e)?r.x:e,isNaN(t)?r.y:t,isNaN(n)?r.z:n),this.props.node.updateOutputs()}}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("div",null,this.props.name),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_x")},"X"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_x"),type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue().x,onChange:this.updateNodeOutput.bind(this),ref:this.inputX}),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_y")},"Y"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_y"),type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue().y,onChange:this.updateNodeOutput.bind(this),ref:this.inputY}),o.a.createElement("label",{htmlFor:"".concat(this.props.id,"_z")},"Z"),o.a.createElement("input",{className:"graph-node-property-text-input",id:"".concat(this.props.id,"_z"),type:"number",placeholder:this.props.name,defaultValue:this.props.property.getValue().z,onChange:this.updateNodeOutput.bind(this),ref:this.inputZ}))}}]),n}(O),X=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputRed=void 0,r.inputGreen=void 0,r.inputBlue=void 0,r.inputAlpha=void 0,r.colorPreview=void 0,r.inputRed=o.a.createRef(),r.inputGreen=o.a.createRef(),r.inputBlue=o.a.createRef(),r.inputAlpha=o.a.createRef(),r.colorPreview=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){var e=this.props.property.getValue(),t=null!==this.props.property.linkedOutput;this.inputRed.current&&(this.inputRed.current.value=e.red.toString(),this.inputRed.current.disabled=t),this.inputGreen.current&&(this.inputGreen.current.value=e.green.toString(),this.inputGreen.current.disabled=t),this.inputBlue.current&&(this.inputBlue.current.value=e.blue.toString(),this.inputBlue.current.disabled=t),this.inputAlpha.current&&(this.inputAlpha.current.value=e.alpha.toString(),this.inputAlpha.current.disabled=t),this.colorPreview.current&&(this.colorPreview.current.style.borderBottom="1px solid rgba(".concat(e.red,",").concat(e.green,",").concat(e.blue,",").concat(e.alpha/255,")")),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){if(this.inputRed.current&&this.inputGreen.current&&this.inputBlue.current&&this.inputAlpha.current){var e=parseInt(this.inputRed.current.value),t=parseInt(this.inputGreen.current.value),n=parseInt(this.inputBlue.current.value),r=parseInt(this.inputAlpha.current.value),o=this.props.property.staticValue;this.props.property.staticValue=new A(isNaN(e)?o.red:e,isNaN(t)?o.green:t,isNaN(n)?o.blue:n,isNaN(r)?o.alpha:r),this.colorPreview.current&&(this.colorPreview.current.style.borderBottom="1px solid rgba(".concat(e,",").concat(t,",").concat(n,",").concat(r/255,")")),this.props.node.updateOutputs()}}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("div",null,this.props.name),o.a.createElement("div",{style:{display:"inline-block",borderBottom:"1px solid white"},ref:this.colorPreview},o.a.createElement("input",{className:"graph-node-property-color-input",type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().red,onChange:this.updateNodeOutput.bind(this),ref:this.inputRed}),o.a.createElement("input",{className:"graph-node-property-color-input",type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().green,onChange:this.updateNodeOutput.bind(this),ref:this.inputGreen}),o.a.createElement("input",{className:"graph-node-property-color-input",type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().blue,onChange:this.updateNodeOutput.bind(this),ref:this.inputBlue}),o.a.createElement("input",{className:"graph-node-property-color-input",type:"text",min:0,max:255,placeholder:this.props.name,defaultValue:this.props.property.getValue().blue,onChange:this.updateNodeOutput.bind(this),ref:this.inputAlpha}),o.a.createElement("div",{className:"graph-node-property-color-preview"})))}}]),n}(O),F=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputNumber=void 0,r.inputNumber=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){this.inputNumber.current&&(this.inputNumber.current.value=this.props.property.getValue().toString(),this.inputNumber.current.disabled=null!==this.props.property.linkedOutput),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){if(this.inputNumber.current){var e,t=parseFloat(null===(e=this.inputNumber.current)||void 0===e?void 0:e.value);isNaN(t)||(this.props.property.staticValue=t)}this.props.node.updateOutputs()}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("label",{htmlFor:this.props.id},this.props.name),o.a.createElement("input",{className:"graph-node-property-text-input",id:this.props.id,type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue(),onChange:this.updateNodeOutput.bind(this),ref:this.inputNumber}))}}]),n}(O),z=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputBoolean=void 0,r.inputBoolean=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){this.inputBoolean.current&&(this.inputBoolean.current.value=this.props.property.getValue().toString(),this.inputBoolean.current.disabled=null!==this.props.property.linkedOutput),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){if(this.inputBoolean.current){var e="true"===this.inputBoolean.current.value.toLowerCase();this.props.property.staticValue=e}this.props.node.updateOutputs()}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("input",{id:this.props.id,type:"checkbox",placeholder:this.props.name,defaultChecked:this.props.property.getValue(),onChange:this.updateNodeOutput.bind(this),ref:this.inputBoolean}),o.a.createElement("label",{className:"graph-node-property-checkbox-label",htmlFor:this.props.id},this.props.name))}}]),n}(O),W=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).inputNumber=void 0,r.inputNumber=o.a.createRef(),r}return Object(u.a)(n,[{key:"update",value:function(){this.inputNumber.current&&(this.inputNumber.current.value=this.props.property.getValue().toString(),this.inputNumber.current.disabled=null!==this.props.property.linkedOutput),this.updateNodeOutput()}},{key:"updateNodeOutput",value:function(){var e;this.inputNumber.current&&(this.props.property.staticValue=null===(e=this.inputNumber.current)||void 0===e?void 0:e.value);this.props.node.updateOutputs()}},{key:"render",value:function(){return o.a.createElement("div",{className:"graph-node-property",onMouseUp:this.onMouseUp.bind(this)},o.a.createElement("div",{className:"user-selection",ref:this._userSelectionRef,onMouseDown:this.onMouseDown.bind(this)}),o.a.createElement("label",{htmlFor:this.props.id},this.props.name),o.a.createElement("input",{className:"graph-node-property-text-input",id:this.props.id,type:"text",placeholder:this.props.name,defaultValue:this.props.property.getValue(),onChange:this.updateNodeOutput.bind(this),ref:this.inputNumber}))}}]),n}(O),K=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"createNode",value:function(e){if(!this.editor)return null;var t;switch(e){case"Number":t=new I(this.editor,0);break;case"Text":t=new Z(this.editor,"");break;case"Toggle":t=new D(this.editor,!1);break;case"Angle":t=new R(this.editor,new P(0,0,0));break;case"Vector":t=new Y(this.editor,new T(0,0,0));break;case"Color":t=new G(this.editor,new A(255,255,255,255));break;case"Model":t=new L(this.editor);break;default:t=null}return t}},{key:"createGraphNodeProperty",value:function(e,t,n,r){switch(n.typeName){case"Toggle":return o.a.createElement(z,{id:e,key:e,node:t,name:n.name,property:n,graph:r});case"Number":return o.a.createElement(F,{id:e,key:e,node:t,name:n.name,property:n,graph:r});case"Vector":return o.a.createElement(B,{id:e,key:e,node:t,name:n.name,property:n,graph:r});case"Angle":return o.a.createElement(U,{id:e,key:e,node:t,name:n.name,property:n,graph:r});case"Color":return o.a.createElement(X,{id:e,key:e,node:t,name:n.name,property:n,graph:r});case"Text":return o.a.createElement(W,{id:e,key:e,node:t,name:n.name,property:n,graph:r});default:return o.a.createElement("div",null)}}},{key:"getNodeColor",value:function(e){switch(e){case"Number":return"#bc316d";case"Text":return"#db9a59";case"Toggle":return"#31bc87";case"Vector":return"#3151bc";case"Angle":return"#5831bc";case"Color":return"#bc31ba";default:return"#8e8e8e"}}}]),n}(x),H=(n(33),function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).currentExplorerCallbackId=void 0,r.fileExplorerCallbacks=void 0,r.currentExplorerCallbackId=0,r.fileExplorerCallbacks=[],r}return Object(u.a)(n,[{key:"openFileExplorer",value:function(e){var t;this.fileExplorerCallbacks[++this.currentExplorerCallbackId]=e,null===(t=gmodinterface)||void 0===t||t.openFileExplorer(this.currentExplorerCallbackId)}},{key:"onFileExplorerClosed",value:function(e,t){this.fileExplorerCallbacks[e]&&this.fileExplorerCallbacks[e](t)}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("editorLoad",(function(e){var t=e;console.debug(t.scheme.editor.state.currentProjectName)})),document.addEventListener("editorSave",(function(e){var t=e;console.debug(t.scheme.editor.state.currentProjectName)})),document.addEventListener("fileExplorerClosed",(function(t){var n=t;e.onFileExplorerClosed(n.id,n.fileContents)}))}}]),n}(w)),J=function(e){Object(p.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=new K;return o.a.createElement(H,{title:"Zero Editor",factory:e,menu:[{buttons:[{name:"Import PAC3",callback:function(){}},{name:"Export PAC3",callback:function(){}}]}],nodeCategories:[{name:"Data",nodeNames:["Number","Text","Toggle","Vector","Angle","Color"]},{name:"Entity",nodeNames:["Model"]},{name:"Effects",nodeNames:[]},{name:"Model",nodeNames:[]},{name:"Modifiers",nodeNames:[]}]})}}]),n}(o.a.Component);n(34),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.d56ede39.chunk.js.map